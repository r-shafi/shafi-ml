{"expireTime":9007200864313665000,"key":"transformer-remark-markdown-html-495fcb4c52d03030b759dd93af8be976-gatsby-remark-vscode-","val":"<blockquote>\n<p><code>Intl.RelativeTimeFormat</code> enables localized formatting of relative times without sacrificing performance.</p>\n</blockquote>\n<p>We've all seen websites using <strong>Just now</strong>, <strong>an hour ago</strong>, <strong>a week ago</strong> etc. to describe when the post was created.\nAlmost all of these websites uses popular libraries like <em>Moment.js</em>, <em>Globalize</em>, <em>date</em>fns_ and-all to use this feature.</p>\n<p>Today we'd look at how we can do that with just Vanilla JavaScript!</p>\n<h2>A Quick Example</h2>\n<p>Just to show you how the <code>Intl.RelativeTimeFormat</code> constructor works</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> when </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Intl</span><span class=\"mtk1\">.</span><span class=\"mtk5 mtku\">RelativeTimeFormat</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;en&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">format</span><span class=\"mtk1\">(</span><span class=\"mtk7\">-</span><span class=\"mtk4\">1</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&#39;day&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">log</span><span class=\"mtk1\">(when);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// &quot;1 day ago&quot;</span></span></span></code></pre>\n<p>Here we passed the <code>Intl.RelativeTimeFormat</code> an argument, a string with a <strong>BCP 47 language tag</strong>. This argument decides the output language.</p>\n<p>Additionally, the <code>Intl.RelativeTimeFormat</code> constructor accepts an optional <code>options</code> argument, which gives us more control over the output. We'd talk about it later in this tutorial.</p>\n<p>Then we told the <code>Intl.RelativeTimeFormat</code> constructor to format the relative time (the -1 value) in <code>day</code> unit.</p>\n<p>Lets tweak this code a bit (copy this and check the code in your console)</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> when </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Intl</span><span class=\"mtk1\">.</span><span class=\"mtk5 mtku\">RelativeTimeFormat</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;bn&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">format</span><span class=\"mtk1\">(</span><span class=\"mtk7\">-</span><span class=\"mtk4\">5</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&#39;day&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">log</span><span class=\"mtk1\">(when);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// &quot;৫ দিন আগে&quot; (translation: 5 days ago)</span></span></span></code></pre>\n<p>And of course we can set times in future as well</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> when </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Intl</span><span class=\"mtk1\">.</span><span class=\"mtk5 mtku\">RelativeTimeFormat</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;en&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">format</span><span class=\"mtk1\">(</span><span class=\"mtk4\">2</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&#39;day&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">log</span><span class=\"mtk1\">(when);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// in 2 days</span></span></span></code></pre>\n<h3>The <code>options</code> Object</h3>\n<p>The <code>options</code> object gives us more control over the output. It have three possible values:</p>\n<ul>\n<li>localeMatcher</li>\n<li>numeric</li>\n<li>style</li>\n</ul>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat/RelativeTimeFormat\">Read about the options in details here</a></p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> options </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  numeric: </span><span class=\"mtk6\">&#39;auto&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> when </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Intl</span><span class=\"mtk1\">.</span><span class=\"mtk5 mtku\">RelativeTimeFormat</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;en&#39;</span><span class=\"mtk1\">, options).</span><span class=\"mtk5\">format</span><span class=\"mtk1\">(</span><span class=\"mtk7\">-</span><span class=\"mtk4\">1</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&#39;day&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">log</span><span class=\"mtk1\">(when);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// yesterday</span></span></span></code></pre>\n<h3>Possible Values for Unit</h3>\n<p>You can pass in the following values in <code>Intl.RelativeTimeFormat(locale).format(relative time, **UNIT**)</code>:</p>\n<ul>\n<li>second</li>\n<li>minute</li>\n<li>hour</li>\n<li>day</li>\n<li>month</li>\n<li>quarter</li>\n<li>year</li>\n</ul>\n<h3>Logically Show When Something Was Created</h3>\n<p>Suppose your post was created at some date</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> createdAt </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Date</span><span class=\"mtk1\">(</span><span class=\"mtk4\">2020</span><span class=\"mtk1\">, </span><span class=\"mtk4\">11</span><span class=\"mtk1\">, </span><span class=\"mtk4\">10</span><span class=\"mtk1\">); </span><span class=\"mtk3\">// December 10, 2020</span></span></span></code></pre>\n<p>And I, the user visited your post right now</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> userVisited </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Date</span><span class=\"mtk1\">();</span></span></span></code></pre>\n<p>If we subtract <code>createdAt</code> from <code>userVisited</code> we'll get a number in milliseconds</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> diff </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> userVisited </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> createdAt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// some value in milliseconds</span></span></span></code></pre>\n<p>Now we need to convert this <code>diff</code> in days</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> toSec </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> diff </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> </span><span class=\"mtk4\">1000</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// convert the milliseconds to seconds</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> toMin </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> toSec </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> </span><span class=\"mtk4\">60</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// convert the seconds to minutes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> toHour </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> toMin </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> </span><span class=\"mtk4\">60</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// convert the minutes to hours</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> toDays </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> toHour </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> </span><span class=\"mtk4\">24</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// convert the hours to days</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// now we&#39;ll round the days up/down</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> rounded </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk9\">round</span><span class=\"mtk1\">(toDays);</span></span></span></code></pre>\n<p>And finally we'll pass the <code>rounded</code> value to <code>Intl.RelativeTimeFormat</code> constructors <code>format</code> method</p>\n<pre class=\"grvsc-container monokai\" data-language=\"javascript\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> when </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Intl</span><span class=\"mtk1\">.</span><span class=\"mtk5 mtku\">RelativeTimeFormat</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;en&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">format</span><span class=\"mtk1\">(</span><span class=\"mtk7\">-</span><span class=\"mtk1\">rounded, </span><span class=\"mtk6\">&#39;day&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// because your post was created in past</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// we pass a minus sign before the rounded</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// to get the output in past tense</span></span></span></code></pre>\n<p>That's it for today, obviously you can make this code a lot more dynamic to show different types of <code>unit</code> based on when the post was created. Try that out on your own.</p>\n<hr>\n<p><a href=\"https://shafi.ml/blog/js-number-format\">Format Number With JavaScript</a></p>\n<p><a href=\"https://shafi.ml/blog/js-date-time-format\">Format Date and Time with JavaScript</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtk9 { color: #66D9EF; }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>"}